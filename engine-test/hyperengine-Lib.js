(()=>{"use strict";var e={449:e=>{function t(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}e.exports=function(e){return(e=e||{}).circles?function(e){var n=[],o=[];return e.proto?function e(s){if("object"!=typeof s||null===s)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return r(s,e);var i={};for(var a in n.push(s),o.push(i),s){var c=s[a];if("object"!=typeof c||null===c)i[a]=c;else if(c instanceof Date)i[a]=new Date(c);else if(ArrayBuffer.isView(c))i[a]=t(c);else{var d=n.indexOf(c);i[a]=-1!==d?o[d]:e(c)}}return n.pop(),o.pop(),i}:function e(s){if("object"!=typeof s||null===s)return s;if(s instanceof Date)return new Date(s);if(Array.isArray(s))return r(s,e);var i={};for(var a in n.push(s),o.push(i),s)if(!1!==Object.hasOwnProperty.call(s,a)){var c=s[a];if("object"!=typeof c||null===c)i[a]=c;else if(c instanceof Date)i[a]=new Date(c);else if(ArrayBuffer.isView(c))i[a]=t(c);else{var d=n.indexOf(c);i[a]=-1!==d?o[d]:e(c)}}return n.pop(),o.pop(),i};function r(e,r){for(var s=Object.keys(e),i=new Array(s.length),a=0;a<s.length;a++){var c=s[a],d=e[c];if("object"!=typeof d||null===d)i[c]=d;else if(d instanceof Date)i[c]=new Date(d);else if(ArrayBuffer.isView(d))i[c]=t(d);else{var l=n.indexOf(d);i[c]=-1!==l?o[l]:r(d)}}return i}}(e):e.proto?function e(o){if("object"!=typeof o||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,e);var r={};for(var s in o){var i=o[s];"object"!=typeof i||null===i?r[s]=i:i instanceof Date?r[s]=new Date(i):ArrayBuffer.isView(i)?r[s]=t(i):r[s]=e(i)}return r}:function e(o){if("object"!=typeof o||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,e);var r={};for(var s in o)if(!1!==Object.hasOwnProperty.call(o,s)){var i=o[s];"object"!=typeof i||null===i?r[s]=i:i instanceof Date?r[s]=new Date(i):ArrayBuffer.isView(i)?r[s]=t(i):r[s]=e(i)}return r};function n(e,n){for(var o=Object.keys(e),r=new Array(o.length),s=0;s<o.length;s++){var i=o[s],a=e[i];"object"!=typeof a||null===a?r[i]=a:a instanceof Date?r[i]=new Date(a):ArrayBuffer.isView(a)?r[i]=t(a):r[i]=n(a)}return r}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{n.r(o),n.d(o,{diagram:()=>ze,engine:()=>Me});const e={generateID:({otherIDs:t})=>{let n=null;do{n=e.makeid(11)}while(void 0!==t[n]);return n},makeid:e=>{for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*o));return t}},t=e,r={connectionsALL:{},connections:{}};class s{constructor(e){this._env={hyperdiagram:e,connectionsALL:{},connections:{}}}getConnection({id:e=null}){return null!==e&&this._env.connections[e]||null}getConnections({source:e=null,target:t=null}){const{connections:n}=this._env;let o=[];return null!==e&&null===t?o=Object.values(n).filter((t=>t.source===e)):null!==t&&null===e?o=Object.values(n).filter((e=>e.target===t)):null!==e&&null!==t&&(o=Object.values(n).filter((n=>n.source===e&&n.target===t))),o}get AllConnections(){return this._env.connectionsALL}createConnection({type:e,source:n,target:o}){if(this.getConnections({source:n,target:o}).length>0)return null;const{connections:r,connectionsALL:s}=this._env,i={id:t.generateID({otherIDs:s}),type:e,source:n,target:o};return s[i.id]=i,r[i.id]=i,i}addConnection({connection:e}){this._env.connectionsALL[e.id]=e,this._env.connections[e.id]=e}deleteConnection({id:e}){const{connections:t,connectionsALL:n}=this._env;return void 0===t[e]?null:(delete t[e],delete n[e],!0)}clearAllConnections(){Object.keys(this._env.connectionsALL).forEach((e=>{this.deleteConnection({id:e})}))}}const i={createConnection:({type:e,source:n,target:o})=>{if(i.getConnections({source:n,target:o}).length>0)return null;const s={id:t.generateID({otherIDs:r.connectionsALL}),type:e,source:n,target:o};return r.connectionsALL[s.id]=s,r.connections[s.id]=s,s},addConnection:({connection:e})=>{r.connectionsALL[e.id]=e,r.connections[e.id]=e},getConnection:({id:e=null})=>null!==e&&r.connections[e]||null,getConnections:({source:e=null,target:t=null})=>null!==e&&null===t?Object.values(r.connections).filter((t=>t.source===e)):null!==t&&null===e?Object.values(r.connections).filter((e=>e.target===t)):null!==e&&null!==t?Object.values(r.connections).filter((n=>n.source===e&&n.target===t)):[],getAllConnections:()=>r.connectionsALL,deleteConnection:({id:e})=>void 0===r.connections[e]?null:(delete r.connections[e],delete r.connectionsALL[e],!0),clearAllConnections:()=>{Object.keys(r.connectionsALL).forEach((e=>{i.deleteConnection({id:e})}))}},a=i,c={FLOW:{STEP_START:"step-start",STEP_END:"step-end"},DATA:{DATA_IN:"data-in",DATA_OUT:"data-out"}},d={connectorsALL:{},connectors:{}};class l{constructor(e){this._env={hyperdiagram:e,connectorsALL:{},connectors:{}}}get TYPES(){return c}getConnector({id:e}){return this._env.connectors[e]}getConnectorDATA({id:e}){const{node:t,...n}=this._env.connectorsALL[e];return n}getConnectors({node:e=null,type:t=null}){const{connectors:n}=this._env;let o=[];return null!==e&&null===t?o=Object.values(n).filter((t=>t.node.id===e.id)):null!==t&&null===e?o=Object.values(n).filter((e=>e.type===t)):null!==e&&null!==t&&(o=Object.values(n).filter((n=>n.node.id===e.id&&n.type===t))),o}addConnector({node:e,type:n,position:o=0}){const{connectorsALL:r}=this._env,s={id:null,type:n,position:o,node:e};switch(n){case c.FLOW.STEP_START:s.id=t.generateID({otherIDs:r}),e.connectors.flow[s.id]=s;break;case c.FLOW.STEP_END:s.id=t.generateID({otherIDs:r}),u._checkConnectorPosition({connectors:this.getConnectors({node:e,type:n}),position:o}),e.connectors.flow[s.id]=s;break;case c.DATA.DATA_IN:case c.DATA.DATA_OUT:s.id=t.generateID({otherIDs:r}),e.connectors.data[s.id]=s}return null!==s.id&&(d.connectorsALL[s.id]=s,d.connectors[s.id]=s),s.id}loadConnectors({node:e}){const{connectors:t,connectorsALL:n}=this._env;Object.values(e.connectors.flow).forEach((o=>{o.node=e,t[o.id]=o,n[o.id]=o})),Object.values(e.connectors.data).forEach((o=>{o.node=e,t[o.id]=o,n[o.id]=o}))}deleteConnector({node:e,type:t,id:n}){let o=!1;switch(t){case c.FLOW.STEP_START:void 0!==e.connectors.flow[n]&&(delete e.connectors.flow[n],o=!0);break;case c.FLOW.STEP_END:void 0!==e.connectors.flow[n]&&(u._deleteConnectorByPosition({connectors:Object.values(e.connectors.flow).filter((e=>e.type===c.FLOW.STEP_END)),position:e.connectors.flow[n].position}),delete e.connectors.flow[n],o=!0);break;case c.DATA.DATA_IN:case c.DATA.DATA_OUT:void 0!==e.connectors.data[n]&&(delete e.connectors.data[n],o=!0)}const{connections:r}=this._env.hyperdiagram;return r.getConnections({source:n}).forEach((e=>r.deleteConnection({id:e.id}))),r.getConnections({target:n}).forEach((e=>r.deleteConnection({id:e.id}))),!0===o&&(delete this._env.connectorsALL[n],delete this._env.connectors[n]),o}}const u={TYPES:c,_env:d,addConnector:({node:e,type:n,position:o=0})=>{const{connectorsALL:r}=u._env,s={id:null,type:n,position:o,node:e};switch(n){case c.FLOW.STEP_START:s.id=t.generateID({otherIDs:r}),e.connectors.flow[s.id]=s;break;case c.FLOW.STEP_END:s.id=t.generateID({otherIDs:r}),u._checkConnectorPosition({connectors:u.getConnectors({node:e,type:n}),position:o}),e.connectors.flow[s.id]=s;break;case c.DATA.DATA_IN:case c.DATA.DATA_OUT:s.id=t.generateID({otherIDs:r}),e.connectors.data[s.id]=s}return null!==s.id&&(d.connectorsALL[s.id]=s,d.connectors[s.id]=s),s.id},getConnector:({id:e})=>d.connectors[e],getConnectorDATA:({id:e})=>{const{node:t,...n}=d.connectorsALL[e];return n},getConnectors:({node:e=null,type:t=null})=>{const{connectors:n}=d;let o=[];return null!==e&&null===t?o=Object.values(n).filter((t=>t.node.id===e.id)):null!==t&&null===e?o=Object.values(n).filter((e=>e.type===t)):null!==e&&null!==t&&(o=Object.values(n).filter((n=>n.node.id===e.id&&n.type===t))),o},deleteConnector:({node:e,type:t,id:n})=>{let o=!1;switch(t){case c.FLOW.STEP_START:void 0!==e.connectors.flow[n]&&(delete e.connectors.flow[n],o=!0);break;case c.FLOW.STEP_END:void 0!==e.connectors.flow[n]&&(u._deleteConnectorByPosition({connectors:Object.values(e.connectors.flow).filter((e=>e.type===c.FLOW.STEP_END)),position:e.connectors.flow[n].position}),delete e.connectors.flow[n],o=!0);break;case c.DATA.DATA_IN:case c.DATA.DATA_OUT:void 0!==e.connectors.data[n]&&(delete e.connectors.data[n],o=!0)}return a.getConnections({source:n}).forEach((e=>a.deleteConnection({id:e.id}))),a.getConnections({target:n}).forEach((e=>a.deleteConnection({id:e.id}))),!0===o&&(delete d.connectorsALL[n],delete d.connectors[n]),o},_checkConnectorPosition:({connectors:e,position:t})=>{const n=Array.isArray(e)?e:Object.values(e);n.length<t&&(t=n.length),n.sort(((e,t)=>e.position>t.position?1:e.position<t.position?-1:0));for(let e=t;e<n.length;e++)n[e].position++},_deleteConnectorByPosition:({connectors:e,position:t})=>{const n=Object.values(e);if(n.length<t)throw Error("Bad position");n.sort(((e,t)=>e.position>t.position?1:e.position<t.position?-1:0));for(let e=t+1;e<n.length;e++)n[e].position--},loadConnectors:({node:e})=>{Object.values(e.connectors.flow).forEach((t=>{t.node=e,d.connectors[t.id]=t,d.connectorsALL[t.id]=t})),Object.values(e.connectors.data).forEach((t=>{t.node=e,d.connectors[t.id]=t,d.connectorsALL[t.id]=t}))}},f=u,p={def:{name:"flow step default",category:"flow",family:"step",type:"default",connectors:[{type:"step-start"},{type:"step-end"},{type:"data-in"},{type:"data-out"}]},create:({node:e})=>e,delete:({node:e})=>{}},h={id:null,name:null,description:null,properties:{}},g={id:null,reference:null},v={states:{},referencesALL:{},references:{}};class y{constructor(e){this._env={hyperDiagram:e,states:{},referencesALL:{},references:{}}}getStates(){return this._env.states}getState({id:e}){return this._env.states[e]}addState({id:e,name:t,description:n,properties:o}){const{states:r}=this._env;if(void 0!==r[e])throw new Error("State id already exists");const s={...h,id:e,name:t,description:n,properties:o};r[e]=s}updateState({id:e,name:t,description:n,properties:o}){const{states:r}=this._env;if(void 0===r[e])throw new Error("State id not exists");const s={...h,id:e,name:t,description:n,properties:o};r[e]=s}deleteState({id:e}){const{states:t,references:n}=this._env;return void 0===t[e]?null:(Object.values(n).filter((t=>t.reference===e)).forEach((e=>{this.deleteReference({id:e.id})})),delete t[e],!0)}clearStates(){Object.values(this._env.states).forEach((e=>this.deleteState(e)))}get references(){return this._env.references}get allReferences(){return this._env.referencesALL}getReference({id:e}){return this.references[e]}getStateReferences({id:e}){return Object.values(this.references).filter((t=>t.reference===e))}addReference({id:e=null,state:t}){const{states:n,references:o,referencesALL:r}=this._env;if(void 0===n[t])throw new Error("State id not exists");if(void 0!==r[e])throw new Error("State reference id already exists");const s={...g,id:e,reference:t};return r[e]=s,o[e]=s,s}deleteReference({id:e}){const{references:t,referencesALL:n}=this._env;return void 0===t[e]?null:(delete t[e],delete n[e],!0)}}const A={_env:v,addState:({id:e,name:t,description:n,properties:o})=>{if(void 0!==v.states[e])throw new Error("State id already exists");const r={...h,id:e,name:t,description:n,properties:o};v.states[e]=r},getStates:()=>v.states,getState:({id:e})=>v.states[e],updateState:({id:e,name:t,description:n,properties:o})=>{if(void 0===v.states[e])throw new Error("State id not exists");const r={...h,id:e,name:t,description:n,properties:o};v.states[e]=r},deleteState:({id:e})=>void 0===v.states[e]?null:(Object.values(v.references).filter((t=>t.reference===e)).forEach((e=>{A.deleteReference({id:e.id})})),delete v.states[e],!0),clearStates:()=>{Object.values(v.states).forEach((e=>A.deleteState(e)))},addReference:({id:e=null,state:t})=>{if(void 0===v.states[t])throw new Error("State id not exists");if(void 0!==v.referencesALL[e])throw new Error("State reference id already exists");const n={...g,id:e,reference:t};return v.referencesALL[e]=n,v.references[e]=n,n},getReferences:()=>v.references,getAllReferences:()=>v.referencesALL,getReference:({id:e})=>v.references[e],getStateReferences:({id:e})=>Object.values(v.references).filter((t=>t.reference===e)),deleteReference:({id:e})=>void 0===v.references[e]?null:(delete v.references[e],delete v.referencesALL[e],!0)},b=A,m={def:{name:"data state default",category:"data",family:"state",type:"default",connectors:[{type:"data-in"},{type:"data-out"}]},create:({node:e,diagram:t})=>{null===e.extra&&(e.extra={});let n=null;n=void 0!==t?t.data.states:b,e.extra={source:null,state:null,reference:null,...e.extra};const o=n.getState({id:e.extra.source});e.extra.state=o;const r=n.addReference({id:e.id,state:e.extra.source});return e.extra.reference=r.id,e},delete:({node:e})=>{b.deleteReference({id:e.extra.reference})},getDATA:({node:e})=>({...e,extra:{...e.extra,state:null}})},D={def:{name:"flow step pause",category:"flow",family:"step",type:"pause",connectors:[{type:"step-start"},{type:"step-end"}]},create:({node:e})=>e,delete:({node:e})=>{},process:{run:({node:e,engine:t})=>{t.flowControl.pauseFlow()}}},_={def:{name:"flow step function call",category:"flow",family:"step",type:"function-call",connectors:[{type:"step-start"},{type:"step-end"},{type:"data-in"},{type:"data-out"}],attributes:{"function-name":{type:"string",value:null}}},create:({node:e})=>e,delete:({node:e})=>{},process:{run:({node:e,engine:t,data:n})=>{t.diagramProcess.getExternalProcess({id:e.extra.attributes["function-name"].value})({engine:t,data:n})}}},w={processDiagram:({diagram:e,engine:t})=>{const n=e.nodes.getNodes();let o=[];Object.values(n).filter((e=>"flow"===e.category&&"signal"===e.family&&"listen"===e.type)).forEach((e=>{const n=e.extra.attributes["signal-name"].value;o.includes(n)||(o.push(n),t.flowSignals.listenToSignal({signal:n,listener:()=>{t.flowControl.gotoNode(e.id)}}))}))}},E={def:{name:"flow signal listen",category:"flow",family:"signal",type:"listen",connectors:[{type:"step-end"}],attributes:{"signal-name":{type:"string",value:null}}},create:({node:e})=>e,delete:({node:e})=>{},process:w},S={def:{name:"flow signal emit",category:"flow",family:"signal",type:"emit",connectors:[{type:"step-start"}],attributes:{"signal-name":{type:"string",value:null}}},create:({node:e})=>e,delete:({node:e})=>{},process:{run:({node:e,engine:t})=>{t.flowSignals.notifySignal({signal:e.extra.attributes["signal-name"].value})}}},T={nodesDEFS:{flow_step_default:p,data_state_default:m,flow_step_pause:D,flow_step_function_call:_,flow_signal_listen:E,flow_signal_emit:S},categories:{}},O={_env:T,init:()=>{Object.keys(T.nodesDEFS).forEach((e=>{O.defineNode({nodeDEF:T.nodesDEFS[e]})}))},defineNode:({nodeDEF:e})=>{const{category:t,family:n,type:o}=e.def;void 0===T.categories[t]&&(T.categories[t]={name:t,families:{}});const r=T.categories[t];void 0===r.families[n]&&(r.families[n]={name:n,types:{}});const s=r.families[n];if(void 0!==s.types[o])throw new Error("Node type already defined");s.types[o]={name:o,def:e}},getNodeDEF:({category:e,family:t,type:n})=>{const o=T.categories[e];if(void 0===o)throw new Error("Category not found.");const r=o.families[t];if(void 0===r)throw new Error("Family not found.");const s=r.types[n];if(void 0===s)throw new Error("Type not found.");return s.def},getAllNodeDEFS:()=>T.nodesDEFS},C=O;var L=n(449),x=n.n(L);const N={deepClone:e=>x()({proto:!0})(e)},j={nodesALL:{},nodes:{}};class P{constructor(e){this._env={hyperDiagram:e,nodesDEFS:C,nodesALL:{},nodes:{}}}get nodesDEFS(){return this._env.nodesDEFS}getNode({id:e}){return this._env.nodes[e]}getNodes(){return this._env.nodes}get AllNodes(){return this._env.nodesALL}getNodeDATA({id:e}){const t=this._env.nodes[e],{connectors:n}=this._env.hyperDiagram;let o={...t,connectors:{flow:{},data:{}}};Object.values(t.connectors.flow).forEach((e=>{o.connectors.flow[e.id]=n.getConnectorDATA(e)})),Object.values(t.connectors.data).forEach((e=>{o.connectors.data[e.id]=n.getConnectorDATA(e)}));const r=this.nodesDEFS.getNodeDEF(t);return void 0!==r.getDATA&&(o=r.getDATA({node:o})),o}getAllNodesDATA(){const e={};return Object.values(this.AllNodes).forEach((t=>{e[t.id]=this.getNodeDATA(t)})),e}create({category:e,family:n,type:o,extra:r={}}){const s=this.nodesDEFS.getNodeDEF({category:e,family:n,type:o});let i={id:t.generateID({otherIDs:j.nodesALL}),class:"node",category:e,family:n,type:o,name:null,extra:{...r,attributes:{...N.deepClone(s.def.attributes),...r.attributes}},connectors:{flow:{},data:{}}};i.name=`${s.def.name} - ${i.id}`;const{connectors:a}=this._env.hyperDiagram;void 0!==s.def.connectors.find((e=>"step-start"===e.type))&&a.addConnector({node:i,type:a.TYPES.FLOW.STEP_START});void 0!==s.def.connectors.find((e=>"step-end"===e.type))&&a.addConnector({node:i,type:a.TYPES.FLOW.STEP_END});void 0!==s.def.connectors.find((e=>"data-in"===e.type))&&a.addConnector({node:i,type:a.TYPES.DATA.DATA_IN});return void 0!==s.def.connectors.find((e=>"data-out"===e.type))&&a.addConnector({node:i,type:a.TYPES.DATA.DATA_OUT}),i=s.create({node:i}),this._env.nodesALL[i.id]=i,this._env.nodes[i.id]=i,i}loadNode({nodeDATA:e}){const t=this.nodesDEFS.getNodeDEF(e),{hyperDiagram:n}=this._env,{connectors:o}=n;let r={...e};o.loadConnectors({node:r}),r=t.create({node:r,diagram:n}),this._env.nodesALL[r.id]=r,this._env.nodes[r.id]=r}delete({id:e}){const{nodes:t,nodesALL:n}=this._env,{connectors:o}=this._env.hyperDiagram;if(void 0===t[e])return null;const r=t[e];return this.nodesDEFS.getNodeDEF(r).delete({node:r}),o.getConnectors({node:r}).forEach((e=>o.deleteConnector({node:r,type:e.type,id:e.id}))),delete t[e],delete n[e],!0}clearAllNodes(){Object.keys(this.AllNodes).forEach((e=>{this.delete({id:e})}))}}const F={_env:j,nodesDEFS:C,init:()=>{C.init()},create:({category:e,family:n,type:o,extra:r={}})=>{const s=C.getNodeDEF({category:e,family:n,type:o});let i={id:t.generateID({otherIDs:j.nodesALL}),class:"node",category:e,family:n,type:o,name:null,extra:{...r,attributes:{...N.deepClone(s.def.attributes),...r.attributes}},connectors:{flow:{},data:{}}};i.name=`${s.def.name} - ${i.id}`;void 0!==s.def.connectors.find((e=>"step-start"===e.type))&&f.addConnector({node:i,type:f.TYPES.FLOW.STEP_START});void 0!==s.def.connectors.find((e=>"step-end"===e.type))&&f.addConnector({node:i,type:f.TYPES.FLOW.STEP_END});void 0!==s.def.connectors.find((e=>"data-in"===e.type))&&f.addConnector({node:i,type:f.TYPES.DATA.DATA_IN});return void 0!==s.def.connectors.find((e=>"data-out"===e.type))&&f.addConnector({node:i,type:f.TYPES.DATA.DATA_OUT}),i=s.create({node:i}),j.nodesALL[i.id]=i,j.nodes[i.id]=i,i},delete:({id:e})=>{if(void 0===j.nodes[e])return null;const t=j.nodes[e];return C.getNodeDEF(t).delete({node:t}),f.getConnectors({node:t}).forEach((e=>f.deleteConnector({node:t,type:e.type,id:e.id}))),delete j.nodes[e],delete j.nodesALL[e],!0},getNode:({id:e})=>j.nodes[e],getNodeDEF:C.getNodeDEF,getAllNodeDEFS:C.getAllNodeDEFS,getNodeDATA:({id:e})=>{const t=j.nodes[e];let n={...t,connectors:{flow:{},data:{}}};Object.values(t.connectors.flow).forEach((e=>{n.connectors.flow[e.id]=f.getConnectorDATA(e)})),Object.values(t.connectors.data).forEach((e=>{n.connectors.data[e.id]=f.getConnectorDATA(e)}));const o=C.getNodeDEF(t);return void 0!==o.getDATA&&(n=o.getDATA({node:n})),n},getNodes:()=>j.nodes,getAllNodes:()=>j.nodesALL,getAllNodesDATA:()=>{const e={};return Object.values(j.nodesALL).forEach((t=>{e[t.id]=F.getNodeDATA(t)})),e},clearAllNodes:()=>{Object.keys(j.nodesALL).forEach((e=>{F.delete({id:e})}))},loadNode:({nodeDATA:e})=>{const t=C.getNodeDEF(e);let n={...e};f.loadConnectors({node:n}),n=t.create({node:n}),j.nodesALL[n.id]=n,j.nodes[n.id]=n}},I=F,k={states:b};class U{constructor(){this._env={connections:new s(this),connectors:new l(this),nodes:new P(this),states:new y(this)}}get connections(){return this._env.connections}get connectors(){return this._env.connectors}get nodes(){return this._env.nodes}get states(){return this._env.states}get data(){return{states:this.states}}getDATA(){const e={nodes:this.nodes.getAllNodesDATA(),connections:this.connections.getAllConnections(),data:{states:this.states.getStates(),references:this.states.getAllReferences()}};return JSON.stringify(e,null,2)}loadDATA({data:e}){this.nodes.clearAllNodes(),this.states.clearStates(),Object.values(e.data.states).forEach((e=>this.states.addState(e))),Object.values(e.nodes).forEach((e=>this.nodes.loadNode({nodeDATA:e}))),Object.values(e.connections).forEach((e=>this.connections.addConnection({connection:e})))}}const R={node:I,nodes:I,connectors:f,connection:a,data:k,init:()=>{I.init()},getDATA:()=>{const e={nodes:I.getAllNodesDATA(),connections:a.getAllConnections(),data:{states:k.states.getStates(),references:k.states.getAllReferences()}};return JSON.stringify(e,null,2)},loadDATA:({data:e})=>{I.clearAllNodes(),b.clearStates(),Object.values(e.data.states).forEach((e=>k.states.addState(e))),Object.values(e.nodes).forEach((e=>I.loadNode({nodeDATA:e}))),Object.values(e.connections).forEach((e=>a.addConnection({connection:e})))},createHyperDiagram:()=>new U},W={engine:null,diagram:null,externalProcesses:{}};class B{constructor(e){this._env={engine:e,diagram:e.hyperdiagram,externalProcesses:{}}}process(){const{diagram:e,engine:t}=this._env,n=e.nodes.nodesDEFS.getAllNodeDEFS();Object.values(n).forEach((n=>{const{process:o}=n;void 0!==o&&void 0!==o.processDiagram&&o.processDiagram({diagram:e,engine:t})}))}addExternalProcess({id:e,process:t}){this._env.externalProcesses[e]=t}getExternalProcess({id:e}){return this._env.externalProcesses[e]}clearExternalProcesses(){const{externalProcesses:e}=this._env;Object.keys(e).forEach((t=>{delete e[t]}))}get info(){return Y.infoDiagramProcess(this._env.diagram)}}const Y={init:({engine:e})=>{W.engine=e,W.diagram=e._env.hyperdiagram},process(){Y.processDiagram()},processDiagram:(e=W.diagram)=>{const t=e.node.getAllNodeDEFS();Object.values(t).forEach((e=>{void 0!==e.process&&void 0!==e.process.processDiagram&&e.process.processDiagram({diagram:W.diagram,engine:W.engine})}))},addExternalProcess:({id:e,process:t})=>{W.externalProcesses[e]=t},getExternalProcess:({id:e})=>W.externalProcesses[e],clearExternalProcesses:()=>{Object.keys(W.externalProcesses).forEach((e=>{delete W.externalProcesses[e]}))},infoDiagramProcess:(e=W.diagram)=>{const t=new Set;Object.values(e.nodes.getNodes()).filter((e=>"flow"===e.category&&"step"===e.family&&"function-call"===e.type)).forEach((e=>t.add(e.extra.attributes["function-name"].value)));return{external:Array.from(t)||[]}},createDiagramProcess:(...e)=>new B(...e)},z=Y;var M=function(e,t){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},M(e,t)};function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}Object.create;function V(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}function q(e,t,n){if(n||2===arguments.length)for(var o,r=0,s=t.length;r<s;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}Object.create;function J(e){return"function"==typeof e}function G(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var K=G((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Q(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var X=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,o,r;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var i=V(s),a=i.next();!a.done;a=i.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}else s.remove(this);var c=this.initialTeardown;if(J(c))try{c()}catch(e){r=e instanceof K?e.errors:[e]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var l=V(d),u=l.next();!u.done;u=l.next()){var f=u.value;try{te(f)}catch(e){r=null!=r?r:[],e instanceof K?r=q(q([],$(r)),$(e.errors)):r.push(e)}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}if(r)throw new K(r)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)te(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Q(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Q(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),Z=X.EMPTY;function ee(e){return e instanceof X||e&&"closed"in e&&J(e.remove)&&J(e.add)&&J(e.unsubscribe)}function te(e){J(e)?e():e.unsubscribe()}var ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=oe.delegate;return(null==r?void 0:r.setTimeout)?r.setTimeout.apply(r,q([e,t],$(n))):setTimeout.apply(void 0,q([e,t],$(n)))},clearTimeout:function(e){var t=oe.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function re(){}var se=ie("C",void 0,void 0);function ie(e,t,n){return{kind:e,value:t,error:n}}var ae=null;function ce(e){if(ne.useDeprecatedSynchronousErrorHandling){var t=!ae;if(t&&(ae={errorThrown:!1,error:null}),e(),t){var n=ae,o=n.errorThrown,r=n.error;if(ae=null,o)throw r}}else e()}var de=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,ee(t)&&t.add(n)):n.destination=ve,n}return H(t,e),t.create=function(e,t,n){return new pe(e,t,n)},t.prototype.next=function(e){this.isStopped?ge(function(e){return ie("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?ge(ie("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?ge(se,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(X),le=Function.prototype.bind;function ue(e,t){return le.call(e,t)}var fe=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){he(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){he(e)}else he(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){he(e)}},e}(),pe=function(e){function t(t,n,o){var r,s,i=e.call(this)||this;J(t)||!t?r={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=o?o:void 0}:i&&ne.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return i.unsubscribe()},r={next:t.next&&ue(t.next,s),error:t.error&&ue(t.error,s),complete:t.complete&&ue(t.complete,s)}):r=t;return i.destination=new fe(r),i}return H(t,e),t}(de);function he(e){var t;ne.useDeprecatedSynchronousErrorHandling?(t=e,ne.useDeprecatedSynchronousErrorHandling&&ae&&(ae.errorThrown=!0,ae.error=t)):function(e){oe.setTimeout((function(){var t=ne.onUnhandledError;if(!t)throw e;t(e)}))}(e)}function ge(e,t){var n=ne.onStoppedNotification;n&&oe.setTimeout((function(){return n(e,t)}))}var ve={closed:!0,next:re,error:function(e){throw e},complete:re},ye="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ae(e){return e}function be(e){return 0===e.length?Ae:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var me=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o,r=this,s=(o=e)&&o instanceof de||function(e){return e&&J(e.next)&&J(e.error)&&J(e.complete)}(o)&&ee(o)?e:new pe(e,t,n);return ce((function(){var e=r,t=e.operator,n=e.source;s.add(t?t.call(s,n):n?r._subscribe(s):r._trySubscribe(s))})),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=De(t))((function(t,o){var r=new pe({next:function(t){try{e(t)}catch(e){o(e),r.unsubscribe()}},error:o,complete:t});n.subscribe(r)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[ye]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return be(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=De(e))((function(e,n){var o;t.subscribe((function(e){return o=e}),(function(e){return n(e)}),(function(){return e(o)}))}))},e.create=function(t){return new e(t)},e}();function De(e){var t;return null!==(t=null!=e?e:ne.Promise)&&void 0!==t?t:Promise}var _e=G((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),we=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return H(t,e),t.prototype.lift=function(e){var t=new Ee(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new _e},t.prototype.next=function(e){var t=this;ce((function(){var n,o;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var r=V(t.currentObservers),s=r.next();!s.done;s=r.next()){s.value.next(e)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;ce((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;ce((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,o=n.hasError,r=n.isStopped,s=n.observers;return o||r?Z:(this.currentObservers=null,s.push(e),new X((function(){t.currentObservers=null,Q(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,o=t.thrownError,r=t.isStopped;n?e.error(o):r&&e.complete()},t.prototype.asObservable=function(){var e=new me;return e.source=this,e},t.create=function(e,t){return new Ee(e,t)},t}(me),Ee=function(e){function t(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return H(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:Z},t}(we);const Se={subject:new we,listeners:{}};class Te{constructor(){this._env={subject:new we,listeners:{}}}notifySignal({signal:e}){const{subject:t}=this._env;t.next({signal:e})}listenToSignal({listener:e,signal:t}){const{_env:n}=this,{subject:o,listeners:r}=n;void 0===r[t]&&(r[t]=[]);const s=o.subscribe({next:n=>{n.signal===t&&e(n)}});return r[t].push({listener:e,subscriber:s}),s}clearSignals(){const{listeners:e}=this._env;Object.keys(e).forEach((t=>{e[t].forEach((e=>e.subscriber.unsubscribe())),delete e[t]}))}}const Oe={notifySignal:({signal:e})=>{const{subject:t}=Se;t.next({signal:e})},listenToSignal:({listener:e,signal:t})=>{const{subject:n}=Se;void 0===Se.listeners[t]&&(Se.listeners[t]=[]);const o=n.subscribe({next:n=>{n.signal===t&&e(n)}});return Se.listeners[t].push({listener:e,subscriber:o}),o},clearSignals:()=>{Object.keys(Se.listeners).forEach((e=>{Se.listeners[e].forEach((e=>e.subscriber.unsubscribe())),delete Se.listeners[e]}))},infoDiagramSignals:({diagram:e})=>{const t=new Set,n=new Set;Object.values(e.nodes.getNodes()).filter((e=>"flow"===e.category&&"signal"===e.family)).forEach((e=>{switch(e.type){case"listen":t.add(e.extra.attributes["signal-name"].value);break;case"emit":n.add(e.extra.attributes["signal-name"].value)}}));return{listen:Array.from(t)||[],emit:Array.from(n)||[]}},createFlowSignals:(...e)=>new Te(...e)},Ce=Oe,Le={engine:null,hyperdiagram:null,nextNode:null,onPause:!1,runningNode:!1};class xe{constructor(e){this._env={engine:e,hyperdiagram:e.hyperdiagram,nextNode:null,onPause:!1,runningNode:!1}}gotoNode(e){const{_env:t}=this,{engine:n,hyperdiagram:o}=t,r=o.nodes.getNode({id:e}),s=o.nodes.nodesDEFS.getNodeDEF(r);t.runningNode=!0,t.onPause=!1,t.nextNode=null,n.dataControl.setDataFromNode(r);const{data:i}=n.dataControl;s.process&&s.process.run&&s.process.run({node:r,engine:n,data:i});const a=Object.values(r.connectors.flow).filter((e=>"step-end"===e.type))[0];if(void 0!==a){const e=o.connections.getConnections({source:a.id})[0];if(void 0!==e){const n=o.connectors.getConnector({id:e.target});t.nextNode=n.node.id}}t.runningNode=!1,requestAnimationFrame((()=>this.nextStep()))}nextStep(){const{onPause:e,nextNode:t}=this._env;e||null!==t&&this.gotoNode(t)}pauseFlow(){this._env.onPause=!0}get isOnPause(){return this._env.onPause}}const Ne={init:({engine:e})=>{Le.engine=e,Le.hyperdiagram=e._env.hyperdiagram},gotoNode:e=>{const t=Le.hyperdiagram.node.getNode({id:e}),n=Le.hyperdiagram.node.getNodeDEF(t);Le.runningNode=!0,Le.onPause=!1,Le.nextNode=null,Le.engine.dataControl.setDataFromNode({node:t});const o=Le.engine.dataControl.getDATA();n.process&&n.process.run&&n.process.run({node:t,engine:Le.engine,data:o});const r=Object.values(t.connectors.flow).filter((e=>"step-end"===e.type))[0];if(void 0!==r){const e=Le.hyperdiagram.connection.getConnections({source:r.id})[0];if(void 0!==e){const t=Le.hyperdiagram.connectors.getConnector({id:e.target});Le.nextNode=t.node.id}}Le.runningNode=!1,requestAnimationFrame((()=>Ne.nextStep()))},nextStep:()=>{Le.onPause||null!==Le.nextNode&&Ne.gotoNode(Le.nextNode)},pauseFlow:()=>{Le.onPause=!0},createFlowControl:(...e)=>new xe(...e)},je=Ne,Pe={engine:null,hyperdiagram:null,dataIN:{},dataOUT:{}};class Fe{constructor(e){this._env={engine:e,hyperdiagram:e.hyperdiagram,dataIN:{},dataOUT:{}}}setDataFromNode(e){const{_env:t}=this,{hyperdiagram:n}=t;t.dataIN={},t.dataOUT={};const o=n.connectors.getConnectors({node:e,type:"data-in"})[0];if(void 0!==o){n.connections.getConnections({target:o.id}).forEach((e=>{const o=n.connectors.getConnector({id:e.source}),r=n.data.states.getState({id:o.node.extra.source});t.dataIN[r.id]=Object.values(r.properties).reduce(((e,t)=>(e[t.id]=t.value,e)),{})}))}const r=n.connectors.getConnectors({node:e,type:"data-out"})[0];if(void 0!==r){n.connections.getConnections({source:r.id}).forEach((e=>{const o=n.connectors.getConnector({id:e.target}),r=n.data.states.getState({id:o.node.extra.source});t.dataOUT[r.id]=Object.values(r.properties).reduce(((e,t)=>(e[t.id]=t.value,e)),{})}))}}get data(){const{_env:e}=this;return{dataIN:e.dataIN,dataOUT:e.dataOUT}}get info(){return Ie.infoDiagramDATA(this._env.hyperdiagram)}clearDATA(){const{_env:e}=this;e.dataIN={},e.dataOUT={}}updateOutputDATA(){const{_env:e}=this;Object.keys(e.dataOUT).forEach((t=>{const n=e.hyperdiagram.data.states.getState({id:t});Object.keys(e.dataOUT[t]).forEach((o=>{n.properties[o].value=e.dataOUT[t][o]}))}))}}const Ie={init:({engine:e})=>{Pe.engine=e,Pe.hyperdiagram=e._env.hyperdiagram},setDataFromNode:({node:e})=>{Pe.dataIN={},Pe.dataOUT={};const t=Pe.hyperdiagram.connectors.getConnectors({node:e,type:"data-in"})[0];if(void 0!==t){Pe.hyperdiagram.connection.getConnections({target:t.id}).forEach((e=>{const t=Pe.hyperdiagram.connectors.getConnector({id:e.source}),n=Pe.hyperdiagram.data.states.getState({id:t.node.extra.source});Pe.dataIN[n.id]=Object.values(n.properties).reduce(((e,t)=>(e[t.id]=t.value,e)),{})}))}const n=Pe.hyperdiagram.connectors.getConnectors({node:e,type:"data-out"})[0];if(void 0!==n){Pe.hyperdiagram.connection.getConnections({source:n.id}).forEach((e=>{const t=Pe.hyperdiagram.connectors.getConnector({id:e.target}),n=Pe.hyperdiagram.data.states.getState({id:t.node.extra.source});Pe.dataOUT[n.id]=Object.values(n.properties).reduce(((e,t)=>(e[t.id]=t.value,e)),{})}))}},getDATA:()=>({dataIN:Pe.dataIN,dataOUT:Pe.dataOUT}),clearDATA:()=>{Pe.dataIN={},Pe.dataOUT={}},updateOutputDATA:()=>{Object.keys(Pe.dataOUT).forEach((e=>{const t=Pe.hyperdiagram.data.states.getState({id:e});Object.keys(Pe.dataOUT[e]).forEach((n=>{t.properties[n].value=Pe.dataOUT[e][n]}))}))},infoDiagramDATA:(e=Pe.hyperdiagram)=>{const t=new Set;Object.values(e.nodes.getNodes()).filter((e=>"data"===e.category&&"state"===e.family&&"default"===e.type)).forEach((e=>{t.add(e.extra.source)}));return Array.from(t).reduce(((t,n)=>{t[n]={};const o=e.data.states.getState({id:n});return Object.keys(o.properties).forEach((e=>{t[n][e]=o.properties[e].value})),t}),{})},createDataControl:(...e)=>new Fe(...e)},ke=Ie,Ue={hyperdiagram:null};class Re{constructor(e){this._env={hyperdiagram:e},this.diagramProcess=z.createDiagramProcess(this),this.flowSignals=Ce.createFlowSignals(),this.flowControl=je.createFlowControl(this),this.dataControl=ke.createDataControl(this)}get hyperdiagram(){return this._env.hyperdiagram}clearEngine(){const{dataControl:e,flowSignals:t,diagramProcess:n}=this;e.clearDATA(),t.clearSignals(),n.clearExternalProcesses()}get diagramInfo(){const{dataControl:e,diagramProcess:t,hyperdiagram:n}=this;return{process:t.info,signals:Ce.infoDiagramSignals({diagram:n}),data:e.info}}}const We={_env:Ue,init:({hyperdiagram:e})=>{Ue.hyperdiagram=e,z.init({engine:We}),je.init({engine:We}),ke.init({engine:We})},diagramProcess:z,flowSignals:Ce,flowControl:je,dataControl:ke,clearEngine:()=>{We.dataControl.clearDATA(),We.flowSignals.clearSignals(),We.diagramProcess.clearExternalProcesses()},diagramInfo:()=>({process:We.diagramProcess.infoDiagramProcess(),signals:We.flowSignals.infoDiagramSignals({diagram:Ue.hyperdiagram}),data:We.dataControl.infoDiagramDATA()}),createEngine:e=>new Re(e)},Be=We,Ye={init:Be.init,engine:Be};R.node.init();const ze=R,Me=Ye.engine})(),window.HyperEngine=o})();